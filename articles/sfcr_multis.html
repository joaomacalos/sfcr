<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>sfcr_multis • sfcr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="sfcr_multis">
<meta property="og:description" content="sfcr">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@jpmacalos">
<meta name="twitter:site" content="www.joaomacalos.com">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sfcr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/articles/gl1-sim.html">Chapter 3: Model SIM</a>
    </li>
    <li>
      <a href="../articles/articles/gl2-pc.html">Chapter 4: Model PC</a>
    </li>
    <li>
      <a href="../articles/articles/gl3-lp.html">Chapter 5: Model LP</a>
    </li>
    <li>
      <a href="../articles/articles/gl4-open.html">Chapter 6: Models REG and OPEN</a>
    </li>
    <li>
      <a href="../articles/articles/gl5-bmw.html">Chapter 7: Model BMW</a>
    </li>
    <li>
      <a href="../articles/articles/gl6-dis.html">Chapter 9: Model DIS and DISINF</a>
    </li>
    <li>
      <a href="../articles/articles/gl7-insout.html">Chapter 10: Model INSOUT</a>
    </li>
    <li>
      <a href="../articles/articles/gl8-growth.html">Chapter 11: Model GROWTH</a>
    </li>
    <li>
      <a href="../articles/articles/gl9-open12.html">Chapter 12: Model Advanced OPEN</a>
    </li>
    <li>
      <a href="../articles/sfcr_multis.html">sfcr_multis</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/joaomacalos/sfcr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>sfcr_multis</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/joaomacalos/sfcr/blob/master/vignettes/sfcr_multis.Rmd"><code>vignettes/sfcr_multis.Rmd</code></a></small>
      <div class="hidden name"><code>sfcr_multis.Rmd</code></div>

    </div>

    
    
<p>The objective of this vignette is to explore all the possibilities of simulating many similar models with the flexible <code><a href="../reference/sfcr_multis.html">sfcr_multis()</a></code> function.</p>
<p>Load the <code>sfcr</code> package:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/joaomacalos/sfcr">sfcr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></code></pre></div>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.0 ──</code></pre>
<pre><code>## ✔ ggplot2 3.3.3     ✔ purrr   0.3.4
## ✔ tibble  3.0.4     ✔ dplyr   1.0.2
## ✔ tidyr   1.1.2     ✔ stringr 1.4.0
## ✔ readr   1.4.0     ✔ forcats 0.5.0</code></pre>
<pre><code>## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()</code></pre>
<p>I’m going to use model SIM to go through this example as it is a very simple model.</p>
<p>As always, we start by writing down the equations and external variables:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">eqs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sfcr_set.html">sfcr_set</a></span><span class="op">(</span>
  <span class="va">TXs</span> <span class="op">~</span> <span class="va">TXd</span>,
  <span class="va">YD</span> <span class="op">~</span> <span class="va">W</span> <span class="op">*</span> <span class="va">Ns</span> <span class="op">-</span> <span class="va">TXs</span>,
  <span class="va">Cd</span> <span class="op">~</span> <span class="va">alpha1</span> <span class="op">*</span> <span class="va">YD</span> <span class="op">+</span> <span class="va">alpha2</span> <span class="op">*</span> <span class="va">Hh</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span>,
  <span class="va">Hh</span> <span class="op">~</span> <span class="va">YD</span> <span class="op">-</span> <span class="va">Cd</span> <span class="op">+</span> <span class="va">Hh</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span>,
  <span class="va">Ns</span> <span class="op">~</span> <span class="va">Nd</span>,
  <span class="va">Nd</span> <span class="op">~</span> <span class="va">Y</span> <span class="op">/</span> <span class="va">W</span>,
  <span class="va">Cs</span> <span class="op">~</span> <span class="va">Cd</span>,
  <span class="va">Gs</span> <span class="op">~</span> <span class="va">Gd</span>,
  <span class="va">Y</span> <span class="op">~</span> <span class="va">Cs</span> <span class="op">+</span> <span class="va">Gs</span>,
  <span class="va">TXd</span> <span class="op">~</span> <span class="va">theta</span> <span class="op">*</span> <span class="va">W</span> <span class="op">*</span> <span class="va">Ns</span>,
  <span class="va">Hs</span> <span class="op">~</span> <span class="va">Gd</span> <span class="op">-</span> <span class="va">TXd</span> <span class="op">+</span> <span class="va">Hs</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span>
<span class="op">)</span>

<span class="va">external</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sfcr_set.html">sfcr_set</a></span><span class="op">(</span>
  <span class="va">Gd</span> <span class="op">~</span> <span class="fl">20</span>, 
  <span class="va">W</span> <span class="op">~</span> <span class="fl">1</span>, 
  <span class="va">alpha1</span> <span class="op">~</span> <span class="fl">0.6</span>, 
  <span class="va">alpha2</span> <span class="op">~</span> <span class="fl">0.4</span>, 
  <span class="va">theta</span> <span class="op">~</span> <span class="fl">0.2</span>
  <span class="op">)</span></code></pre></div>
<p>And simulating a baseline model:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">baseline</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sfcr_baseline.html">sfcr_baseline</a></span><span class="op">(</span><span class="va">eqs</span>, <span class="va">external</span>, periods <span class="op">=</span> <span class="fl">60</span>, hidden <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Hh"</span> <span class="op">=</span> <span class="st">"Hs"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>The <code><a href="../reference/sfcr_multis.html">sfcr_multis()</a></code> function is a S3 generic that currently can be used in three ways:</p>
<ol style="list-style-type: decimal">
<li>To generate many baseline models based on a expanded set of external equations;</li>
<li>To generate many scenario models based on a expanded set of shocks;</li>
<li>To generate many scenario models that applies the same shock to many baseline models.</li>
</ol>
<p>The idea of this function is that we want to have many models that are very similar but differs in one specific way. That’s why it accept two arguments that are not in the <code><a href="../reference/sfcr_baseline.html">sfcr_baseline()</a></code> or <code><a href="../reference/sfcr_scenario.html">sfcr_scenario()</a></code> functions:</p>
<ol style="list-style-type: decimal">
<li>Expanded: an object created with <code><a href="../reference/sfcr_expand.html">sfcr_expand()</a></code> or with <code><a href="../reference/sfcr_multis.html">sfcr_multis()</a></code>. It is here that we feed the models with its varying characteristics;</li>
<li>Fixed: This is the part of the models that are going to remain fixed. It is a set of equations if the expanded argument is a expanded set of external variables; a baseline model if the expanded argument takes an expanded set of shocks; and it is a shock if the expanded argument takes many baseline models.</li>
</ol>
<p>Furthermore, the <code>periods</code> argument must be defined by the user. Finally, the <code>...</code> argument accept any extra argument that feed the <code><a href="../reference/sfcr_baseline.html">sfcr_baseline()</a></code> and <code><a href="../reference/sfcr_scenario.html">sfcr_scenario()</a></code> functions that are called under the hood.</p>
<div id="many-baseline-models-based-on-a-expanded-set-of-external-equations" class="section level2">
<h2 class="hasAnchor">
<a href="#many-baseline-models-based-on-a-expanded-set-of-external-equations" class="anchor"></a>1. Many baseline models based on a expanded set of external equations</h2>
<p>This option allows the user to select one variable (e.g. <code>alpha1</code>) and run many models that are only different in their values of that variable.</p>
<p>The first step is to expand the external set with the <code><a href="../reference/sfcr_expand.html">sfcr_expand()</a></code> function. It has three arguments:</p>
<ol style="list-style-type: decimal">
<li>x - the set to be expanded</li>
<li>variable - the name of the variable</li>
<li>values - the values that the variable will take</li>
</ol>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x_external</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sfcr_expand.html">sfcr_expand</a></span><span class="op">(</span><span class="va">external</span>, <span class="va">alpha1</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">0.9</span>, <span class="fl">0.02</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>We then use this variable to simulate all the models at once with <code><a href="../reference/sfcr_multis.html">sfcr_multis()</a></code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mlt_sim1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sfcr_multis.html">sfcr_multis</a></span><span class="op">(</span><span class="va">x_external</span>, <span class="va">eqs</span>, <span class="fl">50</span><span class="op">)</span></code></pre></div>
<p>The resulting <code>mlt_sim1</code> object is a <code>sfcr_mlt</code> <code>list</code>. Every item in this list is a <code>sfcr_tbl</code> object that looks like the output generated by <code><a href="../reference/sfcr_baseline.html">sfcr_baseline()</a></code> or <code><a href="../reference/sfcr_scenario.html">sfcr_scenario()</a></code> but has an extra column, named as <code>simulation</code>, that indicates which of the simulation this item represents.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">mlt_sim1</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<pre><code>## tibble [50 × 18] (S3: sfcr_tbl/tbl_df/tbl/data.frame)
##  $ period    : int [1:50] 1 2 3 4 5 6 7 8 9 10 ...
##  $ TXs       : num [1:50] 1.00e-15 6.67 8.44 9.99 1.13e+01 ...
##  $ YD        : num [1:50] 1.00e-15 2.67e+01 3.38e+01 3.99e+01 4.53e+01 ...
##  $ Cd        : num [1:50] 1.00e-15 1.33e+01 2.22e+01 2.99e+01 3.66e+01 ...
##  $ Hh        : num [1:50] 1.00e-15 1.33e+01 2.49e+01 3.49e+01 4.36e+01 ...
##  $ Ns        : num [1:50] 1.00e-15 3.33e+01 4.22e+01 4.99e+01 5.66e+01 ...
##  $ Nd        : num [1:50] 1.00e-15 3.33e+01 4.22e+01 4.99e+01 5.66e+01 ...
##  $ Cs        : num [1:50] 1.00e-15 1.33e+01 2.22e+01 2.99e+01 3.66e+01 ...
##  $ Gs        : num [1:50] 1e-15 2e+01 2e+01 2e+01 2e+01 ...
##  $ Y         : num [1:50] 1.00e-15 3.33e+01 4.22e+01 4.99e+01 5.66e+01 ...
##  $ TXd       : num [1:50] 1.00e-15 6.67 8.44 9.99 1.13e+01 ...
##  $ Hs        : num [1:50] 1.00e-15 1.33e+01 2.49e+01 3.49e+01 4.36e+01 ...
##  $ Gd        : num [1:50] 1e-15 2e+01 2e+01 2e+01 2e+01 ...
##  $ W         : num [1:50] 1e-15 1e+00 1e+00 1e+00 1e+00 ...
##  $ alpha2    : num [1:50] 1e-15 4e-01 4e-01 4e-01 4e-01 ...
##  $ theta     : num [1:50] 1e-15 2e-01 2e-01 2e-01 2e-01 ...
##  $ alpha1    : num [1:50] 1e-15 5e-01 5e-01 5e-01 5e-01 ...
##  $ simulation: int [1:50] 1 1 1 1 1 1 1 1 1 1 ...
##  - attr(*, "matrix")= num [1:50, 1:20] 1.00e-15 6.67 8.44 9.99 1.13e+01 ...
##   ..- attr(*, "dimnames")=List of 2
##   .. ..$ : chr [1:50] "1" "2" "3" "4" ...
##   .. ..$ : chr [1:20] "TXs" "YD" "Cd" "Hh" ...
##  - attr(*, "calls")= tibble [11 × 4] (S3: tbl_df/tbl/data.frame)
##   ..$ lhs  : chr [1:11] "TXs" "YD" "Cd" "Hh" ...
##   ..$ rhs  : chr [1:11] "m[.i, 'TXd']" "m[.i,'W'] * m[.i, 'Ns'] - m[.i, 'TXs']" "m[.i,'alpha1'] * m[.i, 'YD'] + m[.i,'alpha2'] * m[.i-1,'Hh']" "m[.i, 'YD'] - m[.i, 'Cd'] + m[.i-1,'Hh']" ...
##   ..$ block: Named num [1:11] 2 2 2 4 2 2 2 1 2 2 ...
##   .. ..- attr(*, "names")= chr [1:11] "TXs" "YD" "Cd" "Hh" ...
##   ..$ id   : int [1:11] 1 2 3 4 5 6 7 8 9 10 ...
##  - attr(*, "external")= chr [1:5] "Gd" "W" "alpha2" "theta" ...</code></pre>
</div>
<div id="many-scenarios-based-on-a-expanded-set-of-shocks" class="section level2">
<h2 class="hasAnchor">
<a href="#many-scenarios-based-on-a-expanded-set-of-shocks" class="anchor"></a>2. Many scenarios based on a expanded set of shocks</h2>
<p>The idea here is to expand a <code>sfcr_shock</code> set to simulate many scenario models. In this example, I’m going to show how to apply different shocks to the <code>alpha2</code> parameter:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">shock1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sfcr_shock.html">sfcr_shock</a></span><span class="op">(</span>
  variables <span class="op">=</span> <span class="fu"><a href="../reference/sfcr_set.html">sfcr_set</a></span><span class="op">(</span>
    <span class="va">alpha2</span> <span class="op">~</span> <span class="fl">0.3</span>
  <span class="op">)</span>,
  start <span class="op">=</span> <span class="fl">5</span>,
  end <span class="op">=</span> <span class="fl">50</span>
<span class="op">)</span>

<span class="va">x_shock</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sfcr_expand.html">sfcr_expand</a></span><span class="op">(</span><span class="va">shock1</span>, <span class="va">alpha2</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.4</span>, <span class="fl">0.05</span><span class="op">)</span><span class="op">)</span>

<span class="va">mlt_sim2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sfcr_multis.html">sfcr_multis</a></span><span class="op">(</span><span class="va">x_shock</span>, <span class="va">baseline</span>, <span class="fl">50</span><span class="op">)</span></code></pre></div>
<p>As we can see, the structure of these models are the same as before:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">mlt_sim2</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<pre><code>## tibble [50 × 18] (S3: sfcr_tbl/tbl_df/tbl/data.frame)
##  $ period    : int [1:50] 1 2 3 4 5 6 7 8 9 10 ...
##  $ TXs       : num [1:50] 20 20 20 20 10.8 ...
##  $ YD        : num [1:50] 80 80 80 80 43.1 ...
##  $ Cd        : num [1:50] 80 80 80 80 33.8 ...
##  $ Hh        : num [1:50] 80 80 80 80 89.2 ...
##  $ Ns        : num [1:50] 100 100 100 100 53.8 ...
##  $ Nd        : num [1:50] 100 100 100 100 53.8 ...
##  $ Cs        : num [1:50] 80 80 80 80 33.8 ...
##  $ Gs        : num [1:50] 20 20 20 20 20 20 20 20 20 20 ...
##  $ Y         : num [1:50] 100 100 100 100 53.8 ...
##  $ TXd       : num [1:50] 20 20 20 20 10.8 ...
##  $ Hs        : num [1:50] 80 80 80 80 89.2 ...
##  $ Gd        : num [1:50] 20 20 20 20 20 20 20 20 20 20 ...
##  $ W         : num [1:50] 1 1 1 1 1 1 1 1 1 1 ...
##  $ alpha1    : num [1:50] 0.6 0.6 0.6 0.6 0.6 0.6 0.6 0.6 0.6 0.6 ...
##  $ alpha2    : num [1:50] 0.4 0.4 0.4 0.4 0.1 0.1 0.1 0.1 0.1 0.1 ...
##  $ theta     : num [1:50] 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 ...
##  $ simulation: int [1:50] 1 1 1 1 1 1 1 1 1 1 ...
##  - attr(*, "matrix")= num [1:50, 1:20] 20 20 20 20 10.8 ...
##   ..- attr(*, "dimnames")=List of 2
##   .. ..$ : chr [1:50] "60" "60" "60" "60" ...
##   .. ..$ : chr [1:20] "TXs" "YD" "Cd" "Hh" ...
##  - attr(*, "calls")= tibble [11 × 4] (S3: tbl_df/tbl/data.frame)
##   ..$ lhs  : chr [1:11] "TXs" "YD" "Cd" "Hh" ...
##   ..$ rhs  : chr [1:11] "m[.i, 'TXd']" "m[.i,'W'] * m[.i, 'Ns'] - m[.i, 'TXs']" "m[.i,'alpha1'] * m[.i, 'YD'] + m[.i,'alpha2'] * m[.i-1,'Hh']" "m[.i, 'YD'] - m[.i, 'Cd'] + m[.i-1,'Hh']" ...
##   ..$ block: Named num [1:11] 2 2 2 4 2 2 2 1 2 2 ...
##   .. ..- attr(*, "names")= chr [1:11] "TXs" "YD" "Cd" "Hh" ...
##   ..$ id   : int [1:11] 1 2 3 4 5 6 7 8 9 10 ...
##  - attr(*, "external")= chr [1:5] "Gd" "W" "alpha1" "alpha2" ...</code></pre>
</div>
<div id="many-scenarios-based-on-the-same-shock-applied-to-many-baseline-models" class="section level2">
<h2 class="hasAnchor">
<a href="#many-scenarios-based-on-the-same-shock-applied-to-many-baseline-models" class="anchor"></a>3. Many scenarios based on the same shock applied to many baseline models</h2>
<p>Finally, the last option is to apply the same shock to many baseline models, generating many scenarios. In this example, I will use the <code>mlt_sim1</code> object as the <code>expanded</code> argument and the <code>shock1</code> shock as the <code>fixed</code> argument:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mlt_sim3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sfcr_multis.html">sfcr_multis</a></span><span class="op">(</span><span class="va">mlt_sim1</span>, fixed <span class="op">=</span> <span class="va">shock1</span>, periods <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></code></pre></div>
</div>
<div id="plotting-the-results" class="section level2">
<h2 class="hasAnchor">
<a href="#plotting-the-results" class="anchor"></a>Plotting the results</h2>
<p>To visualize the results, the user must combine all the models in a single <code>tibble</code> using the <code>bind_rows()</code> function from <code>dplyr</code>, or using <code>rbind</code> from <code>base</code>. From there, the usual strategy of reshaping the <code>tibble</code> into long format and plotting with <code>ggplot2</code> should be applied.</p>
<p>Below I present a simplified example:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mlt_sim1</span> <span class="op">%&gt;%</span>
  <span class="fu">bind_rows</span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">pivot_longer</span><span class="op">(</span>cols <span class="op">=</span> <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">period</span>, <span class="va">simulation</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">name</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Y"</span>, <span class="st">"YD"</span>, <span class="st">"Cd"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">period</span>, y <span class="op">=</span> <span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_line</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>color <span class="op">=</span> <span class="fu">as_factor</span><span class="op">(</span><span class="va">simulation</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">name</span>, nrow <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_color_hue</span><span class="op">(</span><span class="st">"alpha1"</span>,
                  labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">0.9</span>, <span class="fl">0.02</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme</span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span></code></pre></div>
<p><img src="sfcr_multis_files/figure-html/unnamed-chunk-9-1.png" width="672"> As can be seen in this example, the <code>alpha1</code> parameter affects how fast the model arrives to the steady state but does not change the steady state itself.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Joao Macalos.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
