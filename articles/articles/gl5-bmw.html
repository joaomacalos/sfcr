<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chapter 7: Model BMW • sfcr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><meta property="og:title" content="Chapter 7: Model BMW">
<meta property="og:description" content="sfcr">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@jpmacalos">
<meta name="twitter:site" content="www.joaomacalos.com">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">sfcr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/articles/gl1-sim.html">Chapter 3: Model SIM</a>
    </li>
    <li>
      <a href="../../articles/articles/gl2-pc.html">Chapter 4: Model PC</a>
    </li>
    <li>
      <a href="../../articles/articles/gl3-lp.html">Chapter 5: Model LP</a>
    </li>
    <li>
      <a href="../../articles/articles/gl4-open.html">Chapter 6: Models REG and OPEN</a>
    </li>
    <li>
      <a href="../../articles/articles/gl5-bmw.html">Chapter 7: Model BMW</a>
    </li>
    <li>
      <a href="../../articles/articles/gl6-dis.html">Chapter 9: Model DIS and DISINF</a>
    </li>
    <li>
      <a href="../../articles/articles/gl7-insout.html">Chapter 10: Model INSOUT</a>
    </li>
    <li>
      <a href="../../articles/articles/gl8-growth.html">Chapter 11: Model GROWTH</a>
    </li>
    <li>
      <a href="../../articles/articles/gl9-open12.html">Chapter 12: Model Advanced OPEN</a>
    </li>
    <li>
      <a href="../../articles/sfcr_multis.html">sfcr_multis</a>
    </li>
  </ul>
</li>
<li>
  <a href="../../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/joaomacalos/sfcr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Chapter 7: Model BMW</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/joaomacalos/sfcr/blob/master/vignettes/articles/gl5-bmw.Rmd"><code>vignettes/articles/gl5-bmw.Rmd</code></a></small>
      <div class="hidden name"><code>gl5-bmw.Rmd</code></div>

    </div>

    
    
<p>Load the required packages for this analysis:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/joaomacalos/sfcr">sfcr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="co">#&gt; ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.0 ──</span>
<span class="co">#&gt; ✔ ggplot2 3.3.3     ✔ purrr   0.3.4</span>
<span class="co">#&gt; ✔ tibble  3.0.4     ✔ dplyr   1.0.2</span>
<span class="co">#&gt; ✔ tidyr   1.1.2     ✔ stringr 1.4.0</span>
<span class="co">#&gt; ✔ readr   1.4.0     ✔ forcats 0.5.0</span>
<span class="co">#&gt; ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──</span>
<span class="co">#&gt; ✖ dplyr::filter() masks stats::filter()</span>
<span class="co">#&gt; ✖ dplyr::lag()    masks stats::lag()</span></code></pre></div>
<div id="bank-money-world-model" class="section level1">
<h1 class="hasAnchor">
<a href="#bank-money-world-model" class="anchor"></a>Bank-Money World model</h1>
<div id="equations" class="section level2">
<h2 class="hasAnchor">
<a href="#equations" class="anchor"></a>Equations</h2>
<ol style="list-style-type: decimal">
<li>Write down the equations of the model:</li>
</ol>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bmw_eqs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/sfcr_set.html">sfcr_set</a></span><span class="op">(</span>
  <span class="co"># Basic behavioral equations</span>
  <span class="va">Cs</span> <span class="op">~</span> <span class="va">Cd</span>,
  <span class="va">Is</span> <span class="op">~</span> <span class="va">Id</span>,
  <span class="va">Ns</span> <span class="op">~</span> <span class="va">Nd</span>,
  <span class="va">Ls</span> <span class="op">~</span> <span class="va">Ls</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">Ld</span> <span class="op">-</span> <span class="va">Ld</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span>,
  
  <span class="co"># Transactions of the firms</span>
  <span class="va">Y</span> <span class="op">~</span> <span class="va">Cs</span> <span class="op">+</span> <span class="va">Is</span>,
  <span class="va">WBd</span> <span class="op">~</span> <span class="va">Y</span> <span class="op">-</span> <span class="va">rl</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span> <span class="op">*</span> <span class="va">Ld</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span> <span class="op">-</span> <span class="va">AF</span>,
  <span class="va">AF</span> <span class="op">~</span> <span class="va">delta</span> <span class="op">*</span> <span class="va">K</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span>,
  <span class="va">Ld</span> <span class="op">~</span> <span class="va">Ld</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">Id</span> <span class="op">-</span> <span class="va">AF</span>,
  
  <span class="co"># Transactions of households</span>
  <span class="va">YD</span> <span class="op">~</span> <span class="va">WBs</span> <span class="op">+</span> <span class="va">rm</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span> <span class="op">*</span> <span class="va">Mh</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span>,
  <span class="va">Mh</span> <span class="op">~</span> <span class="va">Mh</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">YD</span> <span class="op">-</span> <span class="va">Cd</span>,
  
  <span class="co"># Transactions of the banks</span>
  <span class="va">Ms</span> <span class="op">~</span> <span class="va">Ms</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">Ls</span> <span class="op">-</span> <span class="va">Ls</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span>,
  <span class="va">rm</span> <span class="op">~</span> <span class="va">rl</span>,
  
  <span class="co"># The wage bill</span>
  <span class="va">WBs</span> <span class="op">~</span> <span class="va">W</span> <span class="op">*</span> <span class="va">Ns</span>,
  <span class="va">Nd</span> <span class="op">~</span> <span class="va">Y</span> <span class="op">/</span> <span class="va">pr</span>,
  <span class="va">W</span> <span class="op">~</span> <span class="va">WBd</span> <span class="op">/</span> <span class="va">Nd</span>,
  
  <span class="co"># Household behavior</span>
  <span class="va">Cd</span> <span class="op">~</span> <span class="va">alpha0</span> <span class="op">+</span> <span class="va">alpha1</span> <span class="op">*</span> <span class="va">YD</span> <span class="op">+</span> <span class="va">alpha2</span> <span class="op">*</span> <span class="va">Mh</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span>,
  
  <span class="co"># The investment behavior</span>
  <span class="va">K</span> <span class="op">~</span> <span class="va">K</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">Id</span> <span class="op">-</span> <span class="va">DA</span>,
  <span class="va">DA</span> <span class="op">~</span> <span class="va">delta</span> <span class="op">*</span> <span class="va">K</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span>,
  <span class="va">KT</span> <span class="op">~</span> <span class="va">kappa</span> <span class="op">*</span> <span class="va">Y</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span>,
  <span class="va">Id</span> <span class="op">~</span> <span class="va">gamma</span> <span class="op">*</span> <span class="op">(</span><span class="va">KT</span> <span class="op">-</span> <span class="va">K</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span> <span class="op">+</span> <span class="va">DA</span>
<span class="op">)</span>

<span class="va">bmw_external</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/sfcr_set.html">sfcr_set</a></span><span class="op">(</span>
  <span class="va">rl</span> <span class="op">~</span> <span class="fl">0.025</span>,
  <span class="va">alpha0</span> <span class="op">~</span> <span class="fl">20</span>,
  <span class="va">alpha1</span> <span class="op">~</span> <span class="fl">0.75</span>,
  <span class="va">alpha2</span> <span class="op">~</span> <span class="fl">0.10</span>,
  <span class="va">delta</span> <span class="op">~</span> <span class="fl">0.10</span>,
  <span class="va">gamma</span> <span class="op">~</span> <span class="fl">0.15</span>,
  <span class="va">kappa</span> <span class="op">~</span> <span class="fl">1</span>,
  <span class="va">pr</span> <span class="op">~</span> <span class="fl">1</span>
<span class="op">)</span></code></pre></div>
</div>
<div id="baseline" class="section level2">
<h2 class="hasAnchor">
<a href="#baseline" class="anchor"></a>Baseline</h2>
<p>This model is tricky. The “Broyden” does not converge to a sensible answer if we don’t set the initial values of the following variables to reasonably large values (as the ones below). Interestingly, the other two solvers (“Gauss” and “Newton”) succeed in arriving to a sensible steady state without setting the initial values:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bmw_initial</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/sfcr_set.html">sfcr_set</a></span><span class="op">(</span>
    <span class="va">Ns</span> <span class="op">~</span> <span class="fl">128</span>, <span class="co"># Needs to be set</span>
    <span class="va">Ls</span> <span class="op">~</span> <span class="fl">12</span>, <span class="co"># Needs to be set</span>
    <span class="va">Y</span> <span class="op">~</span> <span class="fl">128</span>, <span class="co"># Needs to be set</span>
    <span class="va">Ld</span> <span class="op">~</span> <span class="fl">12</span>, <span class="co"># Needs to be set</span>
    <span class="va">Mh</span> <span class="op">~</span> <span class="fl">12</span>, <span class="co"># Needs to be set</span>
    <span class="va">Ms</span> <span class="op">~</span> <span class="fl">12</span>, <span class="co"># Needs to be set</span>
    <span class="va">Nd</span> <span class="op">~</span> <span class="fl">128</span>, <span class="co"># Needs to be set</span>
    <span class="op">)</span>

<span class="va">bmw</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/sfcr_baseline.html">sfcr_baseline</a></span><span class="op">(</span><span class="va">bmw_eqs</span>, <span class="va">bmw_external</span>, periods <span class="op">=</span> <span class="fl">100</span>, initial <span class="op">=</span> <span class="va">bmw_initial</span>, method <span class="op">=</span> <span class="st">"Broyden"</span>, hidden <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Ms"</span> <span class="op">=</span> <span class="st">"Mh"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bmw</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/sfcr_baseline.html">sfcr_baseline</a></span><span class="op">(</span><span class="va">bmw_eqs</span>, <span class="va">bmw_external</span>, periods <span class="op">=</span> <span class="fl">100</span>, method <span class="op">=</span> <span class="st">"Newton"</span>, hidden <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Ms"</span> <span class="op">=</span> <span class="st">"Mh"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div id="dag" class="section level2">
<h2 class="hasAnchor">
<a href="#dag" class="anchor"></a>DAG</h2>
<p>Let’s check the internal structure of this model with the <code><a href="../../reference/sfcr_dag_blocks_plot.html">sfcr_dag_blocks_plot()</a></code> function:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../../reference/sfcr_dag_blocks_plot.html">sfcr_dag_blocks_plot</a></span><span class="op">(</span><span class="va">bmw_eqs</span><span class="op">)</span></code></pre></div>
<p><img src="gl5-bmw_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>First, let’s check that the model arrived to a steady state income level:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bmw</span> <span class="op">%&gt;%</span>
  <span class="fu">pivot_longer</span><span class="op">(</span>cols <span class="op">=</span> <span class="op">-</span><span class="va">period</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">name</span> <span class="op">==</span> <span class="st">"Y"</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">period</span>, y <span class="op">=</span> <span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_line</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Steady state GDP"</span><span class="op">)</span></code></pre></div>
<p><img src="gl5-bmw_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
</div>
<div id="matrices-of-model-bmw" class="section level2">
<h2 class="hasAnchor">
<a href="#matrices-of-model-bmw" class="anchor"></a>Matrices of model BMW</h2>
<div id="balance-sheet" class="section level3">
<h3 class="hasAnchor">
<a href="#balance-sheet" class="anchor"></a>Balance-sheet</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bs_bmw</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/sfcr_matrix.html">sfcr_matrix</a></span><span class="op">(</span>
  columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Households"</span>, <span class="st">"Firms"</span>, <span class="st">"Banks"</span>, <span class="st">"Sum"</span><span class="op">)</span>,
  codes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"h"</span>, <span class="st">"f"</span>, <span class="st">"b"</span>, <span class="st">"s"</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Money"</span>, h <span class="op">=</span> <span class="st">"+Mh"</span>, b <span class="op">=</span> <span class="st">"-Ms"</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Loans"</span>, f <span class="op">=</span> <span class="st">"-Ld"</span>, b <span class="op">=</span> <span class="st">"+Ls"</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Fixed capital"</span>, f <span class="op">=</span> <span class="st">"+K"</span>, s <span class="op">=</span> <span class="st">"+K"</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Balance"</span>, h <span class="op">=</span> <span class="st">"-Mh"</span>, s <span class="op">=</span> <span class="st">"-Mh"</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<p>Validate:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../../reference/sfcr_validate.html">sfcr_validate</a></span><span class="op">(</span><span class="va">bs_bmw</span>, <span class="va">bmw</span>, <span class="st">"bs"</span><span class="op">)</span>
<span class="co">#&gt; Water tight! The balance-sheet matrix is consistent with the simulated model.</span></code></pre></div>
</div>
<div id="transactions-flow" class="section level3">
<h3 class="hasAnchor">
<a href="#transactions-flow" class="anchor"></a>Transactions-flow</h3>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tfm_bmw</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/sfcr_matrix.html">sfcr_matrix</a></span><span class="op">(</span>
  columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Households"</span>, <span class="st">"Firms_current"</span>, <span class="st">"Firms_capital"</span>, <span class="st">"Banks_current"</span>, <span class="st">"Banks_capital"</span><span class="op">)</span>,
  codes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"h"</span>, <span class="st">"fc"</span>, <span class="st">"fk"</span>, <span class="st">"bc"</span>, <span class="st">"bk"</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Consumption"</span>, h <span class="op">=</span><span class="st">"-Cs"</span>, fc <span class="op">=</span> <span class="st">"+Cd"</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Investment"</span>, fc <span class="op">=</span> <span class="st">"+Is"</span>, fk <span class="op">=</span> <span class="st">"-Id"</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Wages"</span>, h <span class="op">=</span> <span class="st">"+WBs"</span>, fc <span class="op">=</span> <span class="st">"-WBd"</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Depreciation"</span>, fc <span class="op">=</span> <span class="st">"-AF"</span>, fk <span class="op">=</span> <span class="st">"+AF"</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Interest loans"</span>, fc <span class="op">=</span> <span class="st">"-rl[-1] * Ld[-1]"</span>, bc <span class="op">=</span> <span class="st">"+rl[-1] * Ls[-1]"</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Interest on deposits"</span>, h <span class="op">=</span> <span class="st">"+rm[-1] * Mh[-1]"</span>, bc <span class="op">=</span> <span class="st">"-rm[-1] * Ms[-1]"</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Ch. loans"</span>, fk <span class="op">=</span> <span class="st">"+d(Ld)"</span>, bk <span class="op">=</span> <span class="st">"-d(Ls)"</span><span class="op">)</span>,
  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Ch. deposits"</span>, h <span class="op">=</span> <span class="st">"-d(Mh)"</span>, bk <span class="op">=</span> <span class="st">"+d(Ms)"</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../../reference/sfcr_validate.html">sfcr_validate</a></span><span class="op">(</span><span class="va">tfm_bmw</span>, <span class="va">bmw</span>, <span class="st">"tfm"</span><span class="op">)</span>
<span class="co">#&gt; Water tight! The transactions-flow matrix is consistent with the simulated model.</span></code></pre></div>
<p>Now we add some shocks to this model to see how it behaves in different scenarios.</p>
</div>
</div>
<div id="scenario-1-an-increase-in-autonomous-consumption-expenditures" class="section level2">
<h2 class="hasAnchor">
<a href="#scenario-1-an-increase-in-autonomous-consumption-expenditures" class="anchor"></a>Scenario 1: An increase in autonomous consumption expenditures</h2>
<p>First, let’s write a helper function to convert the models to the long format, filter the variables we want to plot, and make a line plot:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">do_plot</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">model</span>, <span class="va">variables</span>, <span class="va">title</span> <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">model</span> <span class="op">%&gt;%</span>
    <span class="fu">mutate</span><span class="op">(</span>YK <span class="op">=</span> <span class="va">Y</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/stats/lag.html">lag</a></span><span class="op">(</span><span class="va">K</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu">pivot_longer</span><span class="op">(</span>cols <span class="op">=</span> <span class="op">-</span><span class="va">period</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">name</span> <span class="op">%in%</span> <span class="va">variables</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">period</span>, y <span class="op">=</span> <span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">geom_line</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>linetype <span class="op">=</span> <span class="va">name</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">labs</span><span class="op">(</span>title <span class="op">=</span> <span class="va">title</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>We then write the shock we want to add and simulate the new scenario:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">shock1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/sfcr_shock.html">sfcr_shock</a></span><span class="op">(</span>
  variables <span class="op">=</span> <span class="fu"><a href="../../reference/sfcr_set.html">sfcr_set</a></span><span class="op">(</span>
    <span class="va">alpha0</span> <span class="op">~</span> <span class="fl">30</span>
  <span class="op">)</span>,
  start <span class="op">=</span> <span class="fl">5</span>,
  end <span class="op">=</span> <span class="fl">60</span>
<span class="op">)</span>

<span class="va">bmw1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/sfcr_scenario.html">sfcr_scenario</a></span><span class="op">(</span><span class="va">bmw</span>,
                      scenario <span class="op">=</span> <span class="va">shock1</span>,
                      periods <span class="op">=</span> <span class="fl">60</span><span class="op">)</span></code></pre></div>
<p>How the consumption of households and their disposable income evolves?</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bmw1</span> <span class="op">%&gt;%</span>
  <span class="fu">do_plot</span><span class="op">(</span>variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Cd"</span>, <span class="st">"YD"</span><span class="op">)</span>, 
          title <span class="op">=</span> <span class="st">"BMW1: Evolution of consumption and disposable income"</span><span class="op">)</span></code></pre></div>
<p><img src="gl5-bmw_files/figure-html/unnamed-chunk-13-1.png" width="700"></p>
<p>And the investment of firms?</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bmw1</span> <span class="op">%&gt;%</span>
  <span class="fu">do_plot</span><span class="op">(</span>variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Id"</span>, <span class="st">"AF"</span><span class="op">)</span>,
          title <span class="op">=</span> <span class="st">"BMW1: Investment of firms"</span><span class="op">)</span></code></pre></div>
<p><img src="gl5-bmw_files/figure-html/unnamed-chunk-14-1.png" width="700"></p>
</div>
<div id="increase-in-the-propensity-to-save" class="section level2">
<h2 class="hasAnchor">
<a href="#increase-in-the-propensity-to-save" class="anchor"></a>Increase in the propensity to save</h2>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">shock2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/sfcr_shock.html">sfcr_shock</a></span><span class="op">(</span>
  variables <span class="op">=</span> <span class="fu"><a href="../../reference/sfcr_set.html">sfcr_set</a></span><span class="op">(</span>
    <span class="va">alpha1</span> <span class="op">~</span> <span class="fl">0.7</span>
  <span class="op">)</span>,
  start <span class="op">=</span> <span class="fl">5</span>,
  end <span class="op">=</span> <span class="fl">60</span>
<span class="op">)</span>

<span class="va">bmw2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/sfcr_scenario.html">sfcr_scenario</a></span><span class="op">(</span><span class="va">bmw</span>,
                      scenario <span class="op">=</span> <span class="va">shock2</span>,
                      periods <span class="op">=</span> <span class="fl">60</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bmw2</span> <span class="op">%&gt;%</span>
  <span class="fu">do_plot</span><span class="op">(</span>variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Cd"</span>, <span class="st">"YD"</span><span class="op">)</span>, title <span class="op">=</span> <span class="st">"BMW2: Decrease in the propensity to save"</span><span class="op">)</span></code></pre></div>
<p><img src="gl5-bmw_files/figure-html/unnamed-chunk-16-1.png" width="700"> As can be seen, a decrease in the propensity to save in this model leads to a permanent decrease in consumption and on disposable income.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bmw2</span> <span class="op">%&gt;%</span>
  <span class="fu">do_plot</span><span class="op">(</span>variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"YK"</span><span class="op">)</span>, title <span class="op">=</span> <span class="st">"BMW2: Decrease in the propensity to save"</span><span class="op">)</span>
<span class="co">#&gt; Warning: Removed 1 row(s) containing missing values (geom_path).</span></code></pre></div>
<p><img src="gl5-bmw_files/figure-html/unnamed-chunk-17-1.png" width="700"> As a note, it is possible to add <code>ggplot2</code> arguments to our helper function:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bmw2</span> <span class="op">%&gt;%</span>
  <span class="fu">do_plot</span><span class="op">(</span>variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"W"</span><span class="op">)</span>, title <span class="op">=</span> <span class="st">"BMW2: Decrease in the propensity to save"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>subtitle <span class="op">=</span> <span class="st">"Evolution of the real wage"</span><span class="op">)</span></code></pre></div>
<p><img src="gl5-bmw_files/figure-html/unnamed-chunk-18-1.png" width="700"></p>
</div>
</div>
<div id="model-bmwk" class="section level1">
<h1 class="hasAnchor">
<a href="#model-bmwk" class="anchor"></a>Model BMWK</h1>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../../reference/sfcr_set_index.html">sfcr_set_index</a></span><span class="op">(</span><span class="va">bmw_eqs</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">lhs</span> <span class="op">==</span> <span class="st">"Cd"</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1 x 3</span>
<span class="co">#&gt;      id lhs   rhs                                   </span>
<span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;chr&gt;                                 </span>
<span class="co">#&gt; 1    16 Cd    alpha0 + alpha1 * YD + alpha2 * Mh[-1]</span>

<span class="va">bmwk_eqs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/sfcr_set.html">sfcr_set</a></span><span class="op">(</span>
  <span class="va">bmw_eqs</span>,
  <span class="va">Cd</span> <span class="op">~</span> <span class="va">alpha0</span> <span class="op">+</span> <span class="va">alpha1w</span> <span class="op">*</span> <span class="va">WBs</span> <span class="op">+</span> <span class="va">alpha1r</span> <span class="op">*</span> <span class="va">rm</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span> <span class="op">*</span> <span class="va">Mh</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span> <span class="op">+</span> <span class="va">alpha2</span> <span class="op">*</span> <span class="va">Mh</span>,
  exclude <span class="op">=</span> <span class="fl">16</span><span class="op">)</span>

<span class="fu"><a href="../../reference/sfcr_set_index.html">sfcr_set_index</a></span><span class="op">(</span><span class="va">bmw_external</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">lhs</span> <span class="op">==</span> <span class="st">"alpha1"</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1 x 3</span>
<span class="co">#&gt;      id lhs    rhs  </span>
<span class="co">#&gt;   &lt;int&gt; &lt;chr&gt;  &lt;chr&gt;</span>
<span class="co">#&gt; 1     3 alpha1 0.75</span>
  
<span class="va">bmwk_ext</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/sfcr_set.html">sfcr_set</a></span><span class="op">(</span>
  <span class="va">bmw_external</span>,
  <span class="va">alpha1w</span> <span class="op">~</span> <span class="fl">0.8</span>,
  <span class="va">alpha1r</span> <span class="op">~</span> <span class="fl">0.15</span>,
  exclude <span class="op">=</span> <span class="fl">3</span>
  
<span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bmwk</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/sfcr_baseline.html">sfcr_baseline</a></span><span class="op">(</span>equations <span class="op">=</span> <span class="va">bmwk_eqs</span>,
                 external <span class="op">=</span> <span class="va">bmwk_ext</span>,
                 periods <span class="op">=</span> <span class="fl">100</span>,
                 hidden <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Ms"</span> <span class="op">=</span> <span class="st">"Mh"</span><span class="op">)</span>,
                 tol <span class="op">=</span> <span class="fl">1e-20</span>,
                 method <span class="op">=</span> <span class="st">"Newton"</span>
                 <span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bmwk</span> <span class="op">%&gt;%</span>
  <span class="fu">do_plot</span><span class="op">(</span>variables <span class="op">=</span> <span class="st">'Y'</span>, <span class="st">"BMWK: Steady state"</span><span class="op">)</span></code></pre></div>
<p><img src="gl5-bmw_files/figure-html/unnamed-chunk-21-1.png" width="700"></p>
<p>Let’s see the impact of an increase on interest rates in this model:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">shock3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/sfcr_shock.html">sfcr_shock</a></span><span class="op">(</span>
  variables <span class="op">=</span> <span class="fu"><a href="../../reference/sfcr_set.html">sfcr_set</a></span><span class="op">(</span><span class="va">rl</span> <span class="op">~</span> <span class="fl">0.035</span><span class="op">)</span>,
  start <span class="op">=</span> <span class="fl">5</span>,
  end <span class="op">=</span> <span class="fl">100</span>
<span class="op">)</span>

<span class="va">bmwk1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/sfcr_scenario.html">sfcr_scenario</a></span><span class="op">(</span><span class="va">bmwk</span>, <span class="va">shock3</span>, <span class="fl">100</span>, tol <span class="op">=</span> <span class="fl">1e-10</span><span class="op">)</span>

<span class="va">bmwk1</span> <span class="op">%&gt;%</span>
  <span class="fu">do_plot</span><span class="op">(</span><span class="st">"Y"</span>, <span class="st">"BMWK1: Increase in the interest rate (rm)"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>subtitle <span class="op">=</span> <span class="st">"Evolution of Gross Domestic Income (Y)"</span><span class="op">)</span></code></pre></div>
<p><img src="gl5-bmw_files/figure-html/unnamed-chunk-22-1.png" width="700"></p>
<p>This model has a very interesting characteristic. If we don’t strive for numerical precision with a very small <code>tol</code> argument at the <code>bmw</code> model, the tiny differences in each period lead the model to explosion:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">shock3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/sfcr_shock.html">sfcr_shock</a></span><span class="op">(</span>
  variables <span class="op">=</span> <span class="fu"><a href="../../reference/sfcr_set.html">sfcr_set</a></span><span class="op">(</span><span class="va">rl</span> <span class="op">~</span> <span class="fl">0.035</span><span class="op">)</span>,
  start <span class="op">=</span> <span class="fl">5</span>,
  end <span class="op">=</span> <span class="fl">200</span>
<span class="op">)</span>

<span class="va">bmwk1_explode</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/sfcr_scenario.html">sfcr_scenario</a></span><span class="op">(</span><span class="va">bmwk</span>, <span class="va">shock3</span>, <span class="fl">200</span>, tol <span class="op">=</span> <span class="fl">1e-5</span>, method <span class="op">=</span> <span class="st">"Newton"</span><span class="op">)</span>

<span class="va">bmwk1_explode</span> <span class="op">%&gt;%</span>
  <span class="fu">do_plot</span><span class="op">(</span><span class="st">"Y"</span>, <span class="st">"BMWK1_EXP: Increase in the interest rate (rm)"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">labs</span><span class="op">(</span>subtitle <span class="op">=</span> <span class="st">"Explosion of Gross Domestic Income (Y)"</span><span class="op">)</span></code></pre></div>
<p><img src="gl5-bmw_files/figure-html/unnamed-chunk-23-1.png" width="700"></p>
</div>
<div id="stability-tests" class="section level1">
<h1 class="hasAnchor">
<a href="#stability-tests" class="anchor"></a>Stability tests</h1>
<p>Let’s try to visualize the sensitivity of the model BMW to different parameter values, as discussed in <span class="citation">Godley and Lavoie (2007, sec. 7.5.2)</span></p>
<p>We’ll start by expanding the values of the <code>kappa</code> parameter in the external set:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bmw_xext</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/sfcr_expand.html">sfcr_expand</a></span><span class="op">(</span><span class="va">bmw_external</span>, <span class="va">kappa</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2.6</span>, <span class="fl">0.2</span><span class="op">)</span><span class="op">)</span>
<span class="va">xbmw</span> <span class="op">&lt;-</span> <span class="fu"><a href="../../reference/sfcr_multis.html">sfcr_multis</a></span><span class="op">(</span><span class="va">bmw_xext</span>, <span class="va">bmw_eqs</span>, periods <span class="op">=</span> <span class="fl">60</span>, method <span class="op">=</span> <span class="st">"Newton"</span><span class="op">)</span></code></pre></div>
<p>We can see that the model start to become very unstable from <span class="math inline">\(kappa &gt; 1.6\)</span>:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">getPalette</span> <span class="op">&lt;-</span> <span class="fu">grDevices</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grDevices/colorRamp.html">colorRampPalette</a></span><span class="op">(</span><span class="fu">RColorBrewer</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/RColorBrewer/man/ColorBrewer.html">brewer.pal</a></span><span class="op">(</span><span class="fl">8</span>, <span class="st">"Dark2"</span><span class="op">)</span><span class="op">)</span>

<span class="fu">bind_rows</span><span class="op">(</span><span class="va">xbmw</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span><span class="op">)</span><span class="op">]</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>simulation <span class="op">=</span> <span class="fu">as_factor</span><span class="op">(</span><span class="va">simulation</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">pivot_longer</span><span class="op">(</span>cols <span class="op">=</span> <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">period</span>, <span class="va">simulation</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">name</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Y"</span>, <span class="st">"YD"</span>, <span class="st">"C"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">period</span>, y <span class="op">=</span> <span class="va">value</span>, color <span class="op">=</span> <span class="va">simulation</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">geom_line</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">1</span>, alpha <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">theme</span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">scale_color_manual</span><span class="op">(</span><span class="st">"kappa"</span>,
     values <span class="op">=</span> <span class="fu">getPalette</span><span class="op">(</span><span class="fl">20</span><span class="op">)</span>,
     labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2.6</span>, <span class="fl">0.2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span> <span class="va">name</span>, scales <span class="op">=</span> <span class="st">'free_y'</span><span class="op">)</span></code></pre></div>
<p><img src="gl5-bmw_files/figure-html/unnamed-chunk-25-1.png" width="864"></p>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<div id="refs" class="references">
<div id="ref-godley2007monetary">
<p>Godley, Wynne, and Marc Lavoie. 2007. <em>Monetary Economics: An Integrated Approach to Credit, Money, Income, Production and Wealth</em>. Palgrave Macmillan.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Joao Macalos.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
